<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸš€ Dream Tycoon VR - The Leverage Adventure</title>
    <meta name="description" content="Experience Dream Tycoon in immersive VR on Meta Quest 3!">

    <!-- A-Frame 1.6 with Quest 3 Support -->
    <script src="https://aframe.io/releases/1.6.0/aframe.min.js"></script>
    <!-- A-Frame Environment for quick beautiful scenes -->
    <script
        src="https://unpkg.com/aframe-environment-component@1.3.7/dist/aframe-environment-component.min.js"></script>
    <!-- Particle System for effects -->
    <script
        src="https://unpkg.com/aframe-particle-system-component@1.1.3/dist/aframe-particle-system-component.min.js"></script>

    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loader-content">
            <h1>ðŸš€ Dream Tycoon VR</h1>
            <p>Loading immersive experience...</p>
            <div class="spinner"></div>
        </div>
    </div>

    <!-- A-Frame VR Scene -->
    <a-scene id="vr-scene" loading-screen="enabled: false"
        renderer="antialias: true; colorManagement: true; highRefreshRate: true"
        vr-mode-ui="enabled: true; enterVRButton: #enter-vr-btn"
        webxr="optionalFeatures: local-floor, bounded-floor, hand-tracking, layers">

        <!-- Assets -->
        <a-assets timeout="30000">
            <!-- Audio (Commented out until files are available) -->
            <!-- 
            <audio id="sfx-select" src="assets/sounds/select.mp3" preload="auto"></audio>
            <audio id="sfx-win" src="assets/sounds/win.mp3" preload="auto"></audio>
            <audio id="sfx-loss" src="assets/sounds/loss.mp3" preload="auto"></audio>
            <audio id="sfx-spin" src="assets/sounds/spin.mp3" preload="auto"></audio>
            <audio id="ambient-music" src="assets/sounds/ambient.mp3" preload="auto" loop="true"></audio>
            -->
        </a-assets>

        <!-- Environment: Neon Casino/Trading Floor Theme -->
        <a-entity
            environment="preset: starry; skyType: atmosphere; skyColor: #0a0a1a; horizonColor: #1a0a3a; lighting: distant; lightPosition: 0 2 -1; fog: 0.7; fogColor: #0a0a2a; ground: flat; groundColor: #0a0a1a; groundColor2: #1a1a3a; dressing: none;"></a-entity>

        <!-- Ambient Lighting -->
        <a-light type="ambient" color="#223" intensity="0.4"></a-light>
        <a-light type="point" color="#4a9eff" intensity="0.8" position="0 4 -3" castShadow="true"></a-light>
        <a-light type="point" color="#ff4aff" intensity="0.5" position="-3 3 -2"></a-light>
        <a-light type="point" color="#4affaa" intensity="0.5" position="3 3 -2"></a-light>

        <!-- Floor with neon grid -->
        <a-entity id="floor" geometry="primitive: plane; width: 30; height: 30" rotation="-90 0 0" position="0 0 0"
            material="color: #0a0a1a; opacity: 0.9; metalness: 0.8; roughness: 0.2">
        </a-entity>

        <!-- Neon Grid Lines -->
        <a-entity id="grid-lines" position="0 0.01 0">
            <!-- Will be generated by JS -->
        </a-entity>

        <!-- Main Game Area -->
        <a-entity id="game-container" position="0 0 -2">

            <!-- Dream Fund Display (Floating Score Panel) -->
            <a-entity id="score-panel" position="0 2.8 -1">
                <a-entity geometry="primitive: plane; width: 2.4; height: 0.8"
                    material="color: #1a1a3a; opacity: 0.9; shader: flat" class="panel-bg">
                </a-entity>
                <a-entity geometry="primitive: plane; width: 2.35; height: 0.75"
                    material="color: #0a0a2a; opacity: 0.95; shader: flat" position="0 0 0.01">
                </a-entity>
                <!-- Glow border -->
                <a-entity geometry="primitive: ring; radiusInner: 0; radiusOuter: 0.03"
                    material="color: #4a9eff; shader: flat; emissive: #4a9eff; emissiveIntensity: 2"
                    position="-1.15 0.35 0.02">
                </a-entity>
                <a-text id="score-label" value="ðŸ’° MY DREAM FUND" color="#4a9eff" align="center" position="0 0.2 0.02"
                    width="2" font="mozillavr">
                </a-text>
                <a-text id="score-value" value="$1,000" color="#fff" align="center" position="0 -0.1 0.02" width="4"
                    font="mozillavr">
                </a-text>
            </a-entity>

            <!-- Leverage Selection Area (Step 1) -->
            <a-entity id="leverage-area" position="0 1.2 0">
                <a-text value="âš¡ PICK YOUR POWER MULTIPLIER âš¡" color="#ffaa00" align="center" position="0 0.8 0"
                    width="3.5" font="mozillavr">
                </a-text>
                <a-text id="leverage-hint" value="Higher Power = Bigger Wins... but also Higher Cost!" color="#888"
                    align="center" position="0 0.55 0" width="3" font="mozillavr">
                </a-text>

                <!-- Leverage Orbs will be generated by JS -->
                <a-entity id="leverage-orbs" position="0 0 0"></a-entity>
            </a-entity>

            <!-- Market Area (Step 2) - Initially Hidden -->
            <a-entity id="market-area" position="0 1.5 0" visible="false">
                <a-text id="market-title" value="ðŸŒŠ RIDE THE MARKET WAVE! ðŸŒŠ" color="#4affaa" align="center"
                    position="0 1.2 0" width="3.5" font="mozillavr">
                </a-text>

                <!-- Giant Slot Machine Display -->
                <a-entity id="slot-machine" position="0 0.3 0">
                    <!-- Slot Machine Frame -->
                    <a-box width="2" height="1.4" depth="0.3" color="#1a1a3a" material="metalness: 0.7; roughness: 0.3">
                    </a-box>
                    <!-- Display Screen -->
                    <a-entity geometry="primitive: plane; width: 1.8; height: 1" material="color: #0a0a1a; shader: flat"
                        position="0 0 0.16">
                    </a-entity>
                    <!-- Current Value Display -->
                    <a-text id="slot-value-prev" value="$0" color="#ffffff" opacity="0.2" align="center"
                        position="0 0.25 0.17" width="3" font="mozillavr">
                    </a-text>
                    <a-text id="slot-value-current" value="$500" color="#fff" align="center" position="0 0 0.17"
                        width="5" font="mozillavr">
                    </a-text>
                    <a-text id="slot-value-next" value="$0" color="#ffffff" opacity="0.2" align="center"
                        position="0 -0.25 0.17" width="3" font="mozillavr">
                    </a-text>
                    <!-- Market Status -->
                    <a-text id="market-status" value="ðŸŒŠ Market Value" color="#4a9eff" align="center"
                        position="0 0.6 0.17" width="2" font="mozillavr">
                    </a-text>
                    <!-- Catch feedback -->
                    <a-text id="catch-hint" value="" color="#ffaa00" align="center" position="0 -0.55 0.17" width="2.5"
                        font="mozillavr">
                    </a-text>
                </a-entity>

                <!-- Action Buttons -->
                <a-entity id="market-buttons" position="0 -0.7 0">
                    <!-- Start Button -->
                    <a-entity id="start-btn" class="clickable vr-button" position="-0.8 0 0">
                        <a-box width="0.7" height="0.3" depth="0.1" color="#4a9eff"
                            material="emissive: #4a9eff; emissiveIntensity: 0.3">
                        </a-box>
                        <a-text value="ðŸŽ¢ START" color="#fff" align="center" position="0 0 0.06" width="1.5"></a-text>
                    </a-entity>

                    <!-- Catch Button -->
                    <a-entity id="catch-btn" class="clickable vr-button" position="0 0 0" visible="false">
                        <a-box width="0.9" height="0.4" depth="0.1" color="#4affaa"
                            material="emissive: #4affaa; emissiveIntensity: 0.5"
                            animation__pulse="property: material.emissiveIntensity; from: 0.3; to: 0.8; dur: 500; easing: easeInOutSine; loop: true; dir: alternate">
                        </a-box>
                        <a-text value="ðŸŽ£ CATCH!" color="#fff" align="center" position="0 0 0.06" width="2"></a-text>
                    </a-entity>

                    <!-- Back Button -->
                    <a-entity id="back-btn" class="clickable vr-button" position="0.8 0 0">
                        <a-box width="0.6" height="0.3" depth="0.1" color="#666"
                            material="emissive: #333; emissiveIntensity: 0.2">
                        </a-box>
                        <a-text value="ðŸ”™ BACK" color="#fff" align="center" position="0 0 0.06" width="1.2"></a-text>
                    </a-entity>
                </a-entity>
            </a-entity>

            <!-- Result Display -->
            <a-entity id="result-display" position="0 2 0" visible="false">
                <a-text id="result-text" value="" color="#fff" align="center" position="0 0 0" width="4"
                    font="mozillavr">
                </a-text>
            </a-entity>

            <!-- Insolvency Screen -->
            <a-entity id="insolvent-screen" position="0 1.5 0" visible="false">
                <a-entity geometry="primitive: plane; width: 3; height: 2"
                    material="color: #1a0a0a; opacity: 0.95; shader: flat">
                </a-entity>
                <a-text value="ðŸ’¥ GAME OVER ðŸ’¥" color="#ff4444" align="center" position="0 0.5 0.01" width="3"
                    font="mozillavr">
                </a-text>
                <a-text value="The Dream Fund is empty!" color="#ffaaaa" align="center" position="0 0.15 0.01"
                    width="2.5" font="mozillavr">
                </a-text>
                <a-text value="Even the best tycoons start over." color="#888" align="center" position="0 -0.1 0.01"
                    width="2.5" font="mozillavr">
                </a-text>
                <a-entity id="restart-btn" class="clickable vr-button" position="0 -0.5 0.01">
                    <a-box width="0.9" height="0.3" depth="0.1" color="#4a9eff"
                        material="emissive: #4a9eff; emissiveIntensity: 0.3">
                    </a-box>
                    <a-text value="ðŸ”„ RESTART" color="#fff" align="center" position="0 0 0.06" width="1.5"></a-text>
                </a-entity>
            </a-entity>
        </a-entity>

        <!-- Particle Effects Container -->
        <a-entity id="effects-container" position="0 0 -2">
            <!-- Win Confetti (activated on win) -->
            <a-entity id="confetti-emitter" position="0 3 0" visible="false"
                particle-system="preset: dust; color: #FFD700, #FF69B4, #00CED1, #98FB98; particleCount: 150; size: 0.08; velocityValue: 0 -1 0; accelerationValue: 0 -0.5 0; maxAge: 3">
            </a-entity>
        </a-entity>

        <!-- Camera Rig with Controllers -->
        <a-entity id="rig" position="0 0 2">
            <a-camera id="camera" look-controls="pointerLockEnabled: false"
                wasd-controls="enabled: true; acceleration: 20" position="0 1.6 0">
                <!-- Cursor for non-VR interaction -->
                <a-cursor id="cursor" color="#4a9eff" fuse="false" raycaster="objects: .clickable">
                </a-cursor>
            </a-camera>

            <!-- Quest Controllers -->
            <a-entity id="left-hand" hand-controls="hand: left; handModelStyle: lowPoly; color: #4a9eff"
                laser-controls="hand: left" raycaster="objects: .clickable; far: 5">
            </a-entity>
            <a-entity id="right-hand" hand-controls="hand: right; handModelStyle: lowPoly; color: #4a9eff"
                laser-controls="hand: right" raycaster="objects: .clickable; far: 5">
            </a-entity>
        </a-entity>

        <!-- Educational Sidebar (floating to the left in VR) -->
        <a-entity id="sidebar" position="-2.5 1.5 -1" rotation="0 30 0">
            <a-entity geometry="primitive: plane; width: 1.5; height: 2"
                material="color: #1a1a3a; opacity: 0.9; shader: flat">
            </a-entity>
            <a-text value="ðŸŽ“ TYCOON SCHOOL" color="#ffaa00" align="center" position="0 0.8 0.01" width="1.8"
                font="mozillavr">
            </a-text>
            <a-text
                value="What is Leverage?\n\nImagine a See-Saw!\nLeverage is like a longer\nsee-saw. It can lift you\nhigher (more profit),\nbut it's harder to balance\n(costs more)!"
                color="#aaa" align="center" position="0 0.2 0.01" width="1.4" font="mozillavr" wrap-count="25">
            </a-text>
            <a-text value="ðŸŽ¯ Goal: Grow your Dream\nFund without going Bust!" color="#4affaa" align="center"
                position="0 -0.6 0.01" width="1.4" font="mozillavr" wrap-count="25">
            </a-text>
        </a-entity>

    </a-scene>

    <!-- Enter VR Button (for desktop/mobile) -->
    <button id="enter-vr-btn" class="vr-enter-button" onclick="document.querySelector('a-scene').enterVR();">
        ðŸ¥½ Enter VR
    </button>

    <!-- Game Scripts -->
    <script src="js/game.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/effects.js"></script>
</body>

</html>